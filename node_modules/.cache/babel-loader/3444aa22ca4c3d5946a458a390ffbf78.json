{"ast":null,"code":"import { LOAD_TWISTER_SUCCESS, LOAD_TWISTER_ERROR, LOAD_TWISTER_TWISTS_SUCCESS, LOAD_TWISTER_TWISTS_ERROR } from \"./actionTypes\"; // GET TWISTER DATA AND TWISTS LIST ACTION CREATOR\n\nexport const getTwisterData = twisterUsername => async dispatch => {\n  try {\n    // 1. Get user data\n    fetch(\"http://localhost:8081/api/users/search-twister/\".concat(twisterUsername)).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n    }).then(twisterData => {\n      // 2. If twister exist, get his twists list\n      if (twisterData.status === 200) {\n        console.log(\"coucou succes\");\n        dispatch({\n          type: LOAD_TWISTER_SUCCESS,\n          payload: twisterData.foundTwister\n        });\n        fetch(\"http://localhost:8081/api/twists/\".concat(twisterData.firebaseId)).then(res => {\n          if (res.ok) {\n            return res.json();\n          }\n        }).then(twisterTwistsList => {\n          console.log(\"coucou succes list\");\n          dispatch({\n            type: LOAD_TWISTER_TWISTS_SUCCESS,\n            payload: twisterTwistsList\n          });\n        }).catch(err => {\n          dispatch({\n            type: LOAD_TWISTER_TWISTS_ERROR,\n            payload: \"Sorry, we could not load this twister twists.\"\n          });\n        });\n      } else {\n        // 3. else, if twister was not found, dispatch error message\n        console.log(\"coucou error\");\n        dispatch({\n          type: LOAD_TWISTER_ERROR,\n          payload: \"Sorry, we didn't find this twister.\"\n        });\n      }\n    }).catch(err => {\n      dispatch({\n        type: LOAD_TWISTER_ERROR,\n        payload: \"Sorry, we didn't find this twister.\"\n      });\n    });\n  } catch (err) {\n    dispatch({\n      type: LOAD_TWISTER_ERROR,\n      payload: \"Sorry, we didn't find this twister.\"\n    });\n  }\n}; // // GET TWISTER TWIST LIST ACTION CREATOR\n// export const getTwisterTwistsList = twisterFbId => async dispatch => {\n//   try {\n//     // 1. Get user twists list\n//     fetch(`http://localhost:8081/api/twists/${twisterFbId}`)\n//       .then(res => {\n//         if (res.ok) {\n//           return res.json();\n//         }\n//       })\n//       .then(data => {\n//         console.log(\"data\");\n//         console.log(data);\n//         dispatch({\n//           type: LOAD_TWISTER_TWISTS_SUCCESS,\n//           payload: data\n//         });\n//       })\n//       .catch(err => {\n//         dispatch({\n//           type: LOAD_TWISTER_TWISTS_ERROR,\n//           payload: \"Sorry, we could not load this twister twists.\"\n//         });\n//       });\n//   } catch (err) {\n//     dispatch({\n//       type: LOAD_TWISTER_TWISTS_ERROR,\n//       payload: \"Sorry, we could not load this twister twists.\"\n//     });\n//   }\n// };","map":{"version":3,"sources":["/Users/victorarminjon/twister-frontend/src/redux/actions/twister.js"],"names":["LOAD_TWISTER_SUCCESS","LOAD_TWISTER_ERROR","LOAD_TWISTER_TWISTS_SUCCESS","LOAD_TWISTER_TWISTS_ERROR","getTwisterData","twisterUsername","dispatch","fetch","then","res","ok","json","twisterData","status","console","log","type","payload","foundTwister","firebaseId","twisterTwistsList","catch","err"],"mappings":"AAAA,SACEA,oBADF,EAEEC,kBAFF,EAGEC,2BAHF,EAIEC,yBAJF,QAKO,eALP,C,CAOA;;AACA,OAAO,MAAMC,cAAc,GAAGC,eAAe,IAAI,MAAMC,QAAN,IAAkB;AACjE,MAAI;AACF;AACAC,IAAAA,KAAK,0DAAmDF,eAAnD,EAAL,CACGG,IADH,CACQC,GAAG,IAAI;AACX,UAAIA,GAAG,CAACC,EAAR,EAAY;AACV,eAAOD,GAAG,CAACE,IAAJ,EAAP;AACD;AACF,KALH,EAMGH,IANH,CAMQI,WAAW,IAAI;AACnB;AACA,UAAIA,WAAW,CAACC,MAAZ,KAAuB,GAA3B,EAAgC;AAC9BC,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAT,QAAAA,QAAQ,CAAC;AACPU,UAAAA,IAAI,EAAEhB,oBADC;AAEPiB,UAAAA,OAAO,EAAEL,WAAW,CAACM;AAFd,SAAD,CAAR;AAIAX,QAAAA,KAAK,4CAAqCK,WAAW,CAACO,UAAjD,EAAL,CACCX,IADD,CACMC,GAAG,IAAI;AACX,cAAIA,GAAG,CAACC,EAAR,EAAY;AACV,mBAAOD,GAAG,CAACE,IAAJ,EAAP;AACD;AACF,SALD,EAMCH,IAND,CAMMY,iBAAiB,IAAI;AACzBN,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAT,UAAAA,QAAQ,CAAC;AACPU,YAAAA,IAAI,EAAEd,2BADC;AAEPe,YAAAA,OAAO,EAAEG;AAFF,WAAD,CAAR;AAID,SAZD,EAaCC,KAbD,CAaOC,GAAG,IAAI;AACZhB,UAAAA,QAAQ,CAAC;AACPU,YAAAA,IAAI,EAAEb,yBADC;AAEPc,YAAAA,OAAO,EAAE;AAFF,WAAD,CAAR;AAID,SAlBD;AAmBD,OAzBD,MAyBO;AACL;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAT,QAAAA,QAAQ,CAAC;AACPU,UAAAA,IAAI,EAAEf,kBADC;AAEPgB,UAAAA,OAAO,EAAE;AAFF,SAAD,CAAR;AAID;AACF,KAzCH,EA0CGI,KA1CH,CA0CSC,GAAG,IAAI;AACZhB,MAAAA,QAAQ,CAAC;AACPU,QAAAA,IAAI,EAAEf,kBADC;AAEPgB,QAAAA,OAAO,EAAE;AAFF,OAAD,CAAR;AAID,KA/CH;AAgDD,GAlDD,CAkDE,OAAOK,GAAP,EAAY;AACZhB,IAAAA,QAAQ,CAAC;AACPU,MAAAA,IAAI,EAAEf,kBADC;AAEPgB,MAAAA,OAAO,EAAE;AAFF,KAAD,CAAR;AAID;AACF,CAzDM,C,CA2DP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import {\n  LOAD_TWISTER_SUCCESS,\n  LOAD_TWISTER_ERROR,\n  LOAD_TWISTER_TWISTS_SUCCESS,\n  LOAD_TWISTER_TWISTS_ERROR,\n} from \"./actionTypes\";\n\n// GET TWISTER DATA AND TWISTS LIST ACTION CREATOR\nexport const getTwisterData = twisterUsername => async dispatch => {\n  try {\n    // 1. Get user data\n    fetch(`http://localhost:8081/api/users/search-twister/${twisterUsername}`)\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n      })\n      .then(twisterData => {\n        // 2. If twister exist, get his twists list\n        if (twisterData.status === 200) {\n          console.log(\"coucou succes\");\n          dispatch({\n            type: LOAD_TWISTER_SUCCESS,\n            payload: twisterData.foundTwister\n          });\n          fetch(`http://localhost:8081/api/twists/${twisterData.firebaseId}`)\n          .then(res => {\n            if (res.ok) {\n              return res.json();\n            }\n          })\n          .then(twisterTwistsList => {\n            console.log(\"coucou succes list\");\n            dispatch({\n              type: LOAD_TWISTER_TWISTS_SUCCESS,\n              payload: twisterTwistsList\n            });\n          })\n          .catch(err => {\n            dispatch({\n              type: LOAD_TWISTER_TWISTS_ERROR,\n              payload: \"Sorry, we could not load this twister twists.\"\n            });\n          });\n        } else {\n          // 3. else, if twister was not found, dispatch error message\n          console.log(\"coucou error\");\n          dispatch({\n            type: LOAD_TWISTER_ERROR,\n            payload: \"Sorry, we didn't find this twister.\"\n          });\n        }\n      })\n      .catch(err => {\n        dispatch({\n          type: LOAD_TWISTER_ERROR,\n          payload: \"Sorry, we didn't find this twister.\"\n        });\n      });\n  } catch (err) {\n    dispatch({\n      type: LOAD_TWISTER_ERROR,\n      payload: \"Sorry, we didn't find this twister.\"\n    });\n  }\n};\n\n// // GET TWISTER TWIST LIST ACTION CREATOR\n// export const getTwisterTwistsList = twisterFbId => async dispatch => {\n//   try {\n//     // 1. Get user twists list\n//     fetch(`http://localhost:8081/api/twists/${twisterFbId}`)\n//       .then(res => {\n//         if (res.ok) {\n//           return res.json();\n//         }\n//       })\n//       .then(data => {\n//         console.log(\"data\");\n//         console.log(data);\n//         dispatch({\n//           type: LOAD_TWISTER_TWISTS_SUCCESS,\n//           payload: data\n//         });\n//       })\n//       .catch(err => {\n//         dispatch({\n//           type: LOAD_TWISTER_TWISTS_ERROR,\n//           payload: \"Sorry, we could not load this twister twists.\"\n//         });\n//       });\n//   } catch (err) {\n//     dispatch({\n//       type: LOAD_TWISTER_TWISTS_ERROR,\n//       payload: \"Sorry, we could not load this twister twists.\"\n//     });\n//   }\n// };\n"]},"metadata":{},"sourceType":"module"}